\chapter{Conclusão}


Ao longo deste trabalho de conclusão de curso, foram investigados mecanismos para avaliar as métricas de código-fonte, facilitar sua interpretação, aumentar a visibilidade destas com intuito de apoiar decisões técnicas, como, por exemplo, a refatoração de código. A fim de se alcançar este objetivo, foi formulada uma hipótese de que a utilização de um ambiente de \textit{Data Warehousing} iria trazer a automação ao processo de medição de métricas de código-fonte, com a possibilidade de criar um campo de conhecimento semântico para facilitar a interpretação de métricas de código-fonte e trazer visibilidade e interpretação necessárias às métricas de código-fonte.

A fim de se validar empiricamente a hipótese, avaliou-se em forma de estudo de caso, o Sistema Integrado de Conhecimento e Gestão (SICG) do Instituto do Patrimônio Artístico Nacional (IPHAN) ao longo do seu ciclo de desenvolvimento no ambiente de \textit{Data Warehousing}. Com a execução do estudo de caso, foi possível observar a evolução do conjunto de métricas de código-fonte neste projeto cumprindo assim o objetivo específico \textbf{OE1}.

Comparando-se a análise dos valores percentis obtidos com o ambiente de \textit{data warehousing} deste trabalho com o relatório de auditoria de código-fonte~\footnote{Presente no Repositório deste Trabalho: \url{https://github.com/gbrego/TCC}}, obteve-se a Tabela \ref{tab:comp}.

\begin{table}[!ht]
\centering
\input{tabelas/resultado-comparacao.ltx}
\caption{Comparação entre este trabalho e o relatório de auditoria de código-fonte}
\label{tab:comp}
\end{table}
\FloatBarrier

O relatório de auditoria sobre o código-fonte do SICG foi produzido ao fim do desenvolvimento da 24ª \textit{release} do software. Este utilizou a ferramenta SonarQube, que, como descrito no Capítulo \ref{chap:arquitetura}, limitou-se a coleta das métricas LOC e ACCM para a linguagem de programação Java. No relatório, chegou-se a conclusão que o projeto não apresentava alto grau de manutenibilidade baseado no valor médio de 1,9 para métrica ACCM e um total de 38.000 linhas de código-fonte. 

Ainda sobre a métrica ACCM, ao se comparar com a análise realizada neste trabalho, percebe-se esta métrica apresenta uma medida semelhante entre as ferramentas Analizo e SonarQube. No caso deste, embora este valor não seja retirado do percentil de classes e sim da média, quando avaliado em relação as configurações~"Tomcat Metrics" e~"OpenJDK Metrics", o valor da aferição, ainda pertence ao intervalo qualitativo~"Excelente". Contudo, cabe destacar que apenas uma métrica não é um conjunto representativo de informações no que tange qualidade de código-fonte \cite{Meirelles2013}.


Portanto, acredita-se que ao afirmar que a manutenibilidade do projeto é baixa, baseado apenas na análise de ACCM, incorre-se na possibilidade de emitir um parecer pouco abrangente, o que pode gerar ambiguidades e/ou dúvidas, com relação a qualidade interna do produto. Como mostrado na Seção \ref{sec:metrics-analisys}, a detecção de valores altos de CBO, mesmo quando se considera um alto uso de \textit{frameworks}, precisa ser alvo de uma investigação mais profunda na aplicação, pois os valores altos de CBO podem indicar uma dificuldade futura de manutenibilidade do projeto.

Quanto ao objetivo específico \textbf{OE2}, verificou-se que o ambiente de \textit{Data Warehousing} permitiu a automação de todo o processo de medição das métricas de código-fonte, pois foram automatizados desde a coleta, transformação dos dados, avaliação das métricas quanto aos intervalos qualitativos, avaliação dos cenários de limpeza de código-fonte e cálculo da taxa de aproveitamento de oportunidades de melhoria de código-fonte. Na Tabela \ref{tab:time}, foram descritos os tempos de execução de cada passo automatizado para a primeira release analisada e a última release analisada.

\begin{table}[!ht]
\centering
\input{tabelas/tempo-execucao.ltx}
\caption{Tempo de Execução de cada passo automatizado no processo de medição de métricas de código-fonte}
\label{tab:time}
\end{table}
\FloatBarrier

Considerando os tempos descritos na Tabela \ref{tab:time}, observa-se que o maior tempo encontra-se na fase de análise estática do código-fonte, pois ao se somar os tempos dos passos que envolvem o processo de ETL, estes resultam em tempos menores que 5 minutos para última release. Observa-se, portanto, que além de cumprir o objetivo específico \textbf{OE2}, com relação a automação dos processos descritos, conseguiu-se realizar a análise em tempo significativo quando comparados com as coletas e execução dos mesmos processos de forma manual.

O IPHAN não realizou análise das métricas de código-fonte ao longo da execução do contrato. Contudo, entende-se que a utilização do ambiente de \textit{data warehousing} poderia auxiliar a atividade da análise do produto de software recebido. Não é o foco deste trabalho, mas com a utilização de ambiente de \textit{data warehousing} verifica-se a possibilidade de gestores de contrato poderem definir certos níveis de qualidade de código-fonte na execução de contratos de desenvolvimento de software, para contratações de serviços de desenvolvimento de software.  

Ao se construir as  configurações~"OpenJDK Metrics"~e~"Tomcat Metrics" para os intervalos qualitativos de métricas de código-fonte, percebe-se que foi possível obter diferentes análises sobre as métricas de código-fonte. Logo, é possível inferir a completude do objetivo específico \textbf{OE3}, pois foi criado um campo de conhecimento semântico (projeto do \textit{data warehouse}), no qual as métricas podem ser interpretadas sob diversas configurações que podem ser flexibilizadas conforme as necessidades de avaliação e características específicas de cada aplicação avaliada.

Quanto a avaliação de indicadores de código-limpo e acompanhamento da taxa de oportunidades de melhoria de código-fonte, observa-se que se contribuiu com dois indicadores de saúde de bom código-fonte. Isto é, o acompanhamento destes pode permitir à equipe de desenvolvimento ou até a mesmo a gestores de projeto tomarem decisões técnicas mais eficientes no que diz respeito ao código-fonte de um projeto. Estes dois indicadores não só cumprem com objetivos específicos \textbf{OE4} e \textbf{OE5}, mas contribuem também para se alcançar o \textbf{objetivo geral} do trabalho, pois estes são indicadores que podem apoiar uma decisão técnica de refatoração.

Quanto ao objetivo \textbf{OE6}, foram contabilizadas, ao longo do trabalho, as consultas OLAP necessárias para responder aos requisitos de negócio para cada um dos processos que foram avaliados conforme a Tabela \ref{tab:resultados-OLAP}. Cabe salientar que a solução proposta não se limita a quantidade de consultas à apenas a essas analisadas.

 
\begin{table}[H]
\begin{center}
\input{tabelas/resultados-olap.ltx}
\caption{Total de Consultas OLAP realizadas}
\label{tab:resultados-OLAP}
\end{center}
\end{table}
\FloatBarrier


Ao se observar os dados obtidos na Tabela \ref{tab:resultados-OLAP} e a própria execução do estudo de caso da Seção \ref{sec:execution-case-study}, concluiu-se que o ambiente de \textit{Data Warehousing} conseguiu responder às necessidades estabelecidas para cada um dos requisitos de negócio identificados. 

Por meio da utilização do plugin Saiku no ambiente de \textit{Data Warehousing}, é possível que cada uma dessas consultas seja exibida em 8 gráficos diferentes ou em Tabelas. Cada uma das consultas pode ainda conter várias outras consultas OLAP que também responderiam a outras necessidades. Contudo, este trabalho se ateve a contabilizar apenas as que respondiam aos requisitos de negócio levantados.

Por fim, ao se analisar o problema de associação entre as medidas numéricas e interpretações e o problema da  ausência de mecanismos de separação, agregação e formas de visualização de dados que permitam a fácil identificação de um ponto de melhoria no código-fonte, verifica-se que estes foram sanados com a utilização do ambiente de \textit{Data Warehousing}. Neste ambiente, foi possível separar cada uma das métricas, agregá-las por releases, classes e ainda foi possível visualizar pontos de melhorias de melhorias de código-fonte em cada uma classes do projeto em uma determinada \textit{release}.   


Portanto, o ambiente de \texit{Data Warehousing} para métricas de código-fonte logrou êxito em aumentar a visibilidade das métricas de código-fonte, facilitando a interpretação destas de modo a apoiar a decisão de refatoração em um projeto. Desta forma, conclui-se que a questão de pesquisa deste trabalho foi devidamente respondida, assim como os objetivos geral e específicos alcançados.


\section{Limitações}

Como uma limitação do trabalho, cabe destacar que o ambiente de \textit{Data Warehousing}, para analisar métricas de código-fonte, neste trabalho, é dependente da ferramenta Analizo, ferramenta de análise estática de código-fonte escolhida. Esta se limita as linguagens de programação C, C++ e Java, até o momento.

Como apresentado anteriormente, na Seção \ref{sec:validade-estudo}, a utilização de um estudo de caso por si só não é suficiente para generalizar os resultados dele obtidos \cite{yin2011applications}. Por esse motivo, a utilização do estudo de caso é uma limitação para a generalização do trabalho. Uma outra limitação quanto ao estudo de caso é a falta de utilização do teste de hipótese como forma de validação estatística da hipótese H0.

Quanto aos metadados do Projeto de \textit{Data Warehouse}, apresentados \ref{sec:project-dw}, verifica-se que para mapear corretamente um determinado cenário de código-fonte com um intervalo de uma métrica, escolheu-se como uma decisão de projeto colocar duas chaves estrangeiras da Tabela "Meta\_Metric\_Ranges"~na Tabela "Meta\_Metric\_Ranges\_Meta\_Scenario". Este fato implica uma limitação do modelo em que não é possível associar mais de dois intervalos de duas métricas de código-fonte a um cenário de limpeza de código-fonte.  

\section{Trabalhos Futuros}

Quanto aos trabalhos futuros, foi possível identificar duas possibilidades imediatas. A primeira possibilidade é uma melhor avaliação de como os padrões de projeto, propostos inicialmente na Tabela \ref{tab:cenarios}, se correlacionam com as avaliações das métricas de código-fonte e a detecção dos cenários de limpeza de código-fonte. A segunda possibilidade é a investigação, com mecanismos estatísticos, com apoio de estudo de múltiplos casos, de como que a Taxa de Aproveitamento de Oportunidades de Melhoria de código-fonte pode se comportar a depender de como se utiliza as boas práticas de código-fonte citadas na Tabela \ref{tab:conceitos}.